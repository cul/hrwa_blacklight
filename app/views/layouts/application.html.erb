<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title><%#= h(@page_title || application_name) %>HRWA</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <%= csrf_meta_tags %>
    <%= render 'layouts/head_tag_content' %>
  </head>

  <% onload_text = "$('input#q').focus();" if params[:q].to_s.empty? and params[:f].to_s.empty? and params[:id].nil? %>
  <body onload="<%= onload_text %>" class="<%= render_body_class.html_safe %>">
  <div class="container" id="outer-container">

	<%= form_tag search_path, :method => :get, :id => 'topsearchform' do %>

	  <div class="navbar navbar-fixed-top">
		<div class="navbar-inner fill">
		  <div class="container" id="navbar-container">
			<ul id="crowndown" class="nav pull-left">
			  <li class="dropdown menu">
				<% crown_img = image_tag("crown-bts-24x24.png", :alt => "CU") %>
				<%= link_to crown_img, "#", :"data-toggle" => "dropdown", :title => "External Links @ Columbia", :rel => "tooltip", :class => "dropdown-toggle menu" %>
				<ul class="dropdown-menu menu-dropdown">
				  <li><a href="http://columbia.edu">Columbia University - Home</a></li>
				  <li><a href="http://library.columbia.edu">Libraries - Home</a></li>
				  <li><a title="Columbia University Libraries - CHRDR" href="http://library.columbia.edu/indiv/humanrights.html">CUL Center for Human Rights Documentation and Research</a></li>
				</ul>
			  </li>
			</ul>
			<h3 class='topbarlogo'><a href="<%= root_path %>" class="brand" rel="tooltip" title="Human Rights Web Archive at Columbia University - Home">HRWA</a></h3>

			<!-- TODO: Clean up unnecessary classes.-->
			<div id="topbarformdiv" class="navbar-search pull-left">
			  <input type="hidden" name="search" value="true" />
			  <div class="input-append"><a href="#" id="advo_link" title="Advanced Options Toggle" rel="tooltip" class="advtoggle mono small pull-right lime">Adv+</a><%
				%><input class="span6 pull-left search-query" type="text" value="<%= params[:q] %>" placeholder="Start a new search&hellip;" size="16" id="q_t" name="q"><%
				%><label class="pull-right add-on success"><a href="#" id="top_form_submit" class="submitss white">Submit</a><input type="submit" class="hidden" /></label><%
				%><label class="pull-right add-on" title="Start a New Search" rel="tooltip"><%= link_to '<i class="icon-refresh icon-white"></i>'.html_safe, search_path, :class=> 'floatright', :id => 'top_form_new_search' %></label><%
				%><label class="pull-right add-on" title="Search Pages" rel="tooltip"><input type="radio" name="search_type" id="asfsearch_t" class="pull-left" value="archive"<%= ( ! @configurator.nil? && @configurator.name  == 'archive' ) ? ' checked="checked"'.html_safe : ''.html_safe; %>/> Archive</label><%
				%><label class="pull-right add-on" title="Search Websites" rel="tooltip"><input type="radio" name="search_type" id="fsfsearch_t" class="pull-left" value="find_site"<%= ( @configurator.nil? || @configurator.name  == 'find_site' ) ? ' checked="checked"'.html_safe : ''.html_safe; %>/> Sites</label><%
				%><label class="pull-right add-on" title="Construct a query" rel="tooltip"><a href="#" data-toggle="modal" data-target="#construct_query_modal" id="top_form_construct_query"><i class="icon-edit icon-white"></i></a></label><%
				%>
			  </div>
			</div>

			<ul id="dropdown" class="nav pull-right">
			  <li class="dropdown menu">
				<a href="#" class="dropdown-toggle menu" data-toggle="dropdown">Menu <b class="caret"></b></a>
				<ul id="pages_dropdown" class="dropdown-menu menu-dropdown">
				  <li <% if current_page?(root_path) %>class="active"<% end %>><a href="<%= root_path %>">HRWA Home</a></li>
				  <li <% if current_page?(about_path) %>class="active"<% end %>><a href="<%= about_path %>">About HRWA</a></li>
				  <li><a href="#help" class="donothing">Help &amp; Tips</a></li>
				  <li class="divider"></li>
				  <li <% if current_page?(browse_path) %>class="active"<% end %>><a href="<%= browse_path %>">Browse HRWA</a></li>
				  <li><%if params[:controller] == 'catalog' && params[:action] == 'index' %><%= debug_link %><% end %></li>
				</ul>
			  </li>
			</ul>
		  </div>
		</div>
	  </div> <!-- //.navbar -->

	  <div id="advanced_options_container" class="container">
		  <div id="hero-search" class="hero-unit hero-border ">
			<h3 class="floatleft">Advanced Search Options</h3>
			<input type="hidden" name="search" value="true" />
			<div id="inside_of_form">
			  <div id="extra_hidden_fields">
				<%= search_as_hidden_fields(:omit_keys => [ #blacklight defaults
									:q, :qt, :page,
									#hrwa custom additions
									:utf8, :search, :search_type, :q_and, :q_or, :q_exclude, :q_not, :search_mode, :sort
								 ]).html_safe %>
			  </div>
			</div> <!--/inside_of_form-->
		  </div>
	  </div>

	<% end %><!-- end form -->

	<div id="construct_query_modal" class="modal fade" style="display:none;z-index:999999;">
	  <div class="modal-header">
		<a class="close" data-dismiss="modal">Ã—</a>
		<h3>Query Constructor</h3>
	  </div>
	  <div class="modal-body">
		<div class="row span9 alignleft">
		  <h6>Find Pages/Sites that have&hellip;</h6>
		  <div class="input-prepend">
				  <label class="pull-left span3 add-on">all these words:</label>
				  <input class="pull-left span6 q_and" placeholder="Enter search terms..." name="q_and" size="16" type="text"/> <a title="You can do this in simple search by adding a + (plus sign) to the beginning of the word you require." rel="tooltip" href="#">tip</a>
		  </div>
		  <div class="input-prepend">
				  <label class="pull-left span3 add-on">this exact wording or phrase:</label>
				  <input class="pull-left span6 q_phrase" placeholder="Enter search terms..." name="q_phrase" size="16" type="text"/> <a title="You can do this in simple search by &quot;surrounding your phrase with quotes&quot;." rel="tooltip" href="#">tip</a>
		  </div>
		  <div class="input-prepend">
				  <label class="pull-left span3 add-on">one or more of these words:</label>
				  <input class="pull-left span6 q_or" placeholder="Enter search terms..." name="q_or" size="16" type="text"/>
		  </div>
		  <h6>But don't show results that have&hellip;</h6>
		  <div class="input-prepend">
				  <label class="pull-left span3 add-on">any of these unwanted words:</label>
				  <input class="pull-left span6 q_exclude" placeholder="Enter search terms..." name="q_exclude" size="16" type="text"/> <a title="You can do this in simple search by adding a - (minus sign) to the beginning of the word you don't want." rel="tooltip" href="#">tip</a>
		  </div>
		</div>
	  </div>
	  <div class="modal-footer">
		<a href="#" class="btn" data-dismiss="modal">Cancel</a>
		<a href="#" id="generate_query_button" data-dismiss="modal" class="btn btn-primary">Generate Query</a>
	  </div>
	</div>

	<div id="outside_of_form" class="invisible">
	  <div id="advanced_options_asf" class="advanced_options">
		<%= render 'layouts/advanced_options_asf' %>
	  </div>
	  <div id="advanced_options_fsf" class="advanced_options">
		<%= render 'layouts/advanced_options_fsf' %>
	  </div>
	</div>

    <%
      # Start main content!
    %>

    <%= render :partial=>'/flash_msg' %>
    <%= yield %>

    <div id="ft">
      <%= raw(@footer) %>
      <div id="footnotes_holder"></div>
    </div>

    <%
      # End main content!
    %>

    <div class="container">
      <footer id="site_footer">
        <p class="alignright"><a id="submit_bug_report_link" href="/internal_feedback">Submit bug report</a></p>
	<p id="culcul"><span class="floatright">&copy; Columbia University Libraries 2012</span><!--<a href="http://columbia.edu">CU Home</a> &gt; <a href="http://library.columbia.edu">Libraries Home</a>--></p>
      </footer>
    </div> <!-- /container -->

    <div id="js_warn">
	<noscript><div class="alert alert-danger">Javascript is required to view this website. Please enable it in your browser.</div></noscript>
    </div>

    <%= render 'layouts/footer_scripts' %>

</div>
  </body>
</html>
