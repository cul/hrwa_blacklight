<div class="container">

  <!-- Main hero unit for a primary marketing message or call to action -->
  <div id="hero-search" class="hero-unit hero-border ">
    <h3>Human Rights Web Archive</h3>

    <div id="heross">
    <%= form_tag search_path, :method => :get, :id => 'searchform' do %>
	  <input type="hidden" name="commit" value="search" />

      <% q_text = params[ :q ] %>
      <%
	if params[ :search_mode ] == "advanced"
	   then q_text = "[Click + to refine search]"
	end
      %>

      <div class="input-append">
	<%= text_field_tag :q, q_text, :disabled => (params[:search_mode] == 'advanced'), :class => "span12", :placeholder =>'Enter search terms...', :id => 'q', :name => 'q', :size => '16' %>

	<%#= search_as_hidden_fields(:omit_keys => [:q, :search_field, :qt, :page]).html_safe %>

	<label class="add-on"><input type="radio" name="search_type" id="fsfsearch" value="find_site"<%= (params[:search_type] != 'archive') ? ' checked="checked"'.html_safe : ''.html_safe; %>> FSF</label>
	<label class="add-on"><input type="radio" name="search_type" id="asfsearch" value="archive"<%= (params[:search_type] == 'archive') ? ' checked="checked"'.html_safe : ''.html_safe; %>> ASF</label>
	<label id="advo" class="add-on hidden"><a href="#" id="advo_link" title="Advanced Options Toggle" rel="twipsy" class="advtoggle moreless lime mono">+</a></label>

	<label class="add-on hidden">
	  <a href="#" id="form_submit" class="submitss">Submit</a>
	</label>
      </div>
    </div><!--/heross-->

      <%= render 'constraints', :localized_params=>params %>
      <div id="advanced_options_inside_of_form"></div>
    <% end %>

    <div id="advanced_options_outside_of_form">
      <div id="advanced_options" class="invisible">

	<div id="gen-query" class="clearfix"></div>
	<h6>Find Pages/Sites that have&hellip;</h6>
	<div class="input-prepend">
	        <label class="add-on">all these words:</label>
	        <input class="span11" placeholder="Enter search terms..." id="q_and" name="q_and"<%= params[:q_and] ? " value='#{params[:q_and]}'" : '' %> size="16" type="text"> <a title="You can do this in simple search by adding a + (plus sign) to the beginning of the word you require." rel="twipsy" href="#">tip</a>
	</div>
	<div class="input-prepend">
	        <label class="add-on">this exact wording or phrase:</label>
	        <input class="span11" placeholder="Enter search terms..." id="q_phrase" name="q_phrase"<%= params[:q_phrase] ? " value='#{params[:q_phrase]}'" : '' %> size="16" type="text"> <a title="You can do this in simple search by &quot;surrounding your phrase with quotes&quot;." rel="twipsy" href="#">tip</a>
	</div>
	<div class="input-prepend">
	        <label class="add-on">one or more of these words:</label>
	        <input class="span11" placeholder="Enter search terms..." id="q_or" name="q_or"<%= params[:q_or] ? " value='#{params[:q_or]}'" : '' %> size="16" type="text">
	</div>
	<h6>But don't show results that have&hellip;</h6>
	<div class="input-prepend">
	        <label class="add-on">any of these unwanted words:</label>
	        <input class="span11" placeholder="Enter search terms..." id="q_exclude" name="q_exclude"<%= params[:q_exclude] ? " value='#{params[:q_exclude]}'" : '' %> size="16" type="text"> <a title="You can do this in simple search by adding a - (minus sign) to the beginning of the word you don't want." rel="twipsy" href="#">tip</a>
	</div>

	<div class="row">
	<div class="span14">
	    <h6>Additional Options</h6>
	<div class="span7 nomar">
		<div class="control-group">
		<label class="control-label">organization type</label>
		<select name="f[organization_type__facet][]" multiple="multiple">
		  <% organization_type_options().each do | key, value | %>
		    <%= %Q{<option value="#{key}">#{key}</option>}.html_safe %>
		  <% end %>
		</select>
	    </div>
		<div class="control-group">
		<label class="control-label">subject</label>
		<select name="f[subject__facet][]" multiple="multiple">
		  <% subject_options().each do | key, value | %>
		    <%= %Q{<option value="#{key}">#{key}</option>}.html_safe %>
		  <% end %>
		</select>
	    </div>
		<div class="control-group">
		<label class="control-label">geographic focus</label>
		  <select name="f[geographic_focus__facet][]" multiple="multiple">
		    <% geographic_focus_options().each do | key, value | %>
		      <%= %Q{<option value="#{key}">#{key}</option>}.html_safe %>
		    <% end %>
		  </select>
	    </div>
		<div class="control-group">
		<label class="control-label">organization based in</label>
		  <select name="f[organization_based_in__facet][]" multiple="multiple">
		    <% organization_based_in_options().each do | key, value | %>
		      <%= %Q{<option value="#{key}">#{key}</option>}.html_safe %>
		    <% end %>
		</select>
	    </div>
		<div class="control-group">
		<label class="control-label">file type</label>
		<select class="control-group" name="lim_mimetype" multiple="multiple">
		  <%# file_type_options().each do | key, value | %>
		    <%#= %Q{<option value="#{key}">#{key}</option>}.html_safe %>
		  <%# end %>
		</select>
	    </div>
		<div class="control-group">
		<label class="control-label">date of capture</label>
		<input id="crawl_start_date" class="span2" type="text" name="crawl_start_date" value="" /> - <input id="crawl_end_date" class="span2" type="text" name="crawl_end_date" value="" />
	    </div>
	</div>
	<div class="span7 nomar">
		<div class="control-group">
		<label class="control-label">language</label>
		<select name="f[language__facet][]" multiple="multiple">
		  <% language_options().each do | key, value | %>
		    <%= %Q{<option value="#{key}">#{key}</option>}.html_safe %>
		  <% end %>
		</select>
		<!--Non-displayed facets below here-->
	    </div>
		<div class="control-group">
		<label class="control-label">title</label>
		<select name="f[title][]" multiple="multiple">
		  <% title_options().each do | key, value | %>
		    <%= %Q{<option value="#{key}">#{key}</option>}.html_safe %>
		  <% end %>
		</select>
	    </div>
		<div class="control-group">
		<label class="control-label">creator name</label>
		<select name="f[creator_name__facet][]" multiple="multiple">
		  <% creator_name_options().each do | key, value | %>
		    <%= %Q{<option value="#{key}">#{key}</option>}.html_safe %>
		  <% end %>
		</select>
	    </div>
		<div class="control-group">
		<label class="control-label">original url</label>
		<select name="f[original_urls][]" multiple="multiple">
		  <% original_urls_options().each do | key, value | %>
		    <%= %Q{<option value="#{key}">#{key}</option>}.html_safe %>
		  <% end %>
		</select>
	    </div>
		<div class="control-group">
		<label class="control-label">domain</label>
		<select class="control-group" name="lim_domain" multiple="multiple">
		  <% domain_options().each do | key, value | %>
		    <%= %Q{<option value="#{key}">#{key}</option>}.html_safe %>
		  <% end %>
		</select>
	    </div>
	</div>
	</div>
	</div>
	<div class="row">
	<div class="span14">
	 <h6>display options</h6>
	 <div class="span7 nomar">
		<div class="control-group">
		<label class="control-label">results per page</label>
		<select class="control-group" name="lim_rows">
				<option></option>
			<option>2</option>
		</select>
	    </div>
	 </div>
	 <div class="span7 nomar">
		<div class="control-group">
		<label class="control-label">sort</label>
		<select class="control-group" name="lim_sort">
				<option></option>
			<option>2</option>
		</select>
	    </div>
	 </div>
	</div>
	</div>
	<div class="row">
	<div class="span14">
	 <h6>dev options (temporary)</h6>
	 <div class="span7 nomar">
		<div class="control-group">
		<label class="control-label">host</label>
		<select class="control-group" name="lim_host">
				<option></option>
			<option>2</option>
		</select>
	    </div>
	 </div>
	 <div class="span7 nomar">
		<div class="control-group">
		<label class="control-label">core</label>
		<select class="control-group" name="lim_core">
				<option></option>
			<option>2</option>
		</select>
	    </div>
	 </div>
	</div>
	</div>

	<p>
	<input type="hidden" name="sort" value="score desc" />

	<input type="hidden" name="search_mode" value="advanced" />

	<input id="advsubmit" type="submit" value="submit" class="btn success" />
	<input id="advreset" type="reset" value="reset all" class="btn" />
	</p>
      </div> <!-- //advanced_search -->
    </div>

  </div>


</div>
