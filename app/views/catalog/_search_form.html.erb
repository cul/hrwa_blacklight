<div id="search" class="search">
  <%= form_tag catalog_index_path, :method => :get do %>
    <h2 class="search"><%= label_tag(:q, "Search ") %></h2>
    <% q_text = params[ :q ] %>
    <% if params[ :search_mode ] == "advanced"
       	 then q_text = "[Click + to refine search] #{q_text}"
       end %>
    <%= text_field_tag :q, q_text, :class => "q" %>
    <% unless search_fields.empty? %>
      <%= label_tag(:search_field, " in ") %>
      <%= select_tag(:search_field, options_for_select(search_fields, h(params[:search_field])), :title => "Targeted search options", :class=>"search_field") %>
    <% end %>
    <%= search_as_hidden_fields(:omit_keys => [:q, :search_field, :qt, :page]).html_safe %>        
    
    <%= submit_tag 'search', :class=>'submit' %>
  <% end %>

  <hr/>
</div>
