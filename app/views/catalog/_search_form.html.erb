<div class="container">

  <!-- Main hero unit for a primary marketing message or call to action -->
  <div id="hero-search" class="hero-unit hero-border ">
    <h3>Human Rights Web Archive</h3>

    <%= form_tag search_path, :method => :get, :id => 'searchform' do %>
      <div id="heross">
	<input type="hidden" name="search" value="true" />

	<% q_text = params[ :q ] %>
	<%
	  if params[ :search_mode ] == "advanced"
	     then q_text = "[Click + to refine search]"
	  end
	%>

	<div class="input-append">
	  <%= text_field_tag :q, q_text, :disabled => (params[:search_mode] == 'advanced'), :class => "span12", :placeholder =>'Enter search terms...', :id => 'q', :name => 'q', :size => '16' %>

	  <%#= search_as_hidden_fields(:omit_keys => [:q, :search_field, :qt, :page]).html_safe %>

	  <label class="add-on"><input type="radio" name="search_type" id="fsfsearch" value="find_site"<%= (params[:search_type] != 'archive') ? ' checked="checked"'.html_safe : ''.html_safe; %>> FSF</label>
	  <label class="add-on"><input type="radio" name="search_type" id="asfsearch" value="archive"<%= (params[:search_type] == 'archive') ? ' checked="checked"'.html_safe : ''.html_safe; %>> ASF</label>
	  <label id="advo" class="add-on hidden"><a href="#" id="advo_link" title="Advanced Options Toggle" rel="twipsy" class="advtoggle moreless lime mono">+</a></label>

	  <label class="add-on hidden">
	    <a href="#" id="form_submit" class="submitss">Submit</a>
	  </label>
	</div>

      </div><!--/heross-->

      <%= render 'constraints', :localized_params=>params %>
      <div id="advanced_options_inside_of_form"></div>
    <% end %>

    <div id="advanced_options_outside_of_form">
      <div id="advanced_options" class="invisible">

	<div id="gen-query" class="clearfix"></div>
	<h6>Find Pages/Sites that have&hellip;</h6>
	<div class="input-prepend">
	        <label class="add-on">all these words:</label>
	        <input class="span11" placeholder="Enter search terms..." id="q_and" name="q_and"<%= params[:q_and] ? " value='#{params[:q_and]}'" : '' %> size="16" type="text"> <a title="You can do this in simple search by adding a + (plus sign) to the beginning of the word you require." rel="twipsy" href="#">tip</a>
	</div>
	<div class="input-prepend">
	        <label class="add-on">this exact wording or phrase:</label>
	        <input class="span11" placeholder="Enter search terms..." id="q_phrase" name="q_phrase"<%= params[:q_phrase] ? " value='#{params[:q_phrase]}'" : '' %> size="16" type="text"> <a title="You can do this in simple search by &quot;surrounding your phrase with quotes&quot;." rel="twipsy" href="#">tip</a>
	</div>
	<div class="input-prepend">
	        <label class="add-on">one or more of these words:</label>
	        <input class="span11" placeholder="Enter search terms..." id="q_or" name="q_or"<%= params[:q_or] ? " value='#{params[:q_or]}'" : '' %> size="16" type="text">
	</div>
	<h6>But don't show results that have&hellip;</h6>
	<div class="input-prepend">
	        <label class="add-on">any of these unwanted words:</label>
	        <input class="span11" placeholder="Enter search terms..." id="q_exclude" name="q_exclude"<%= params[:q_exclude] ? " value='#{params[:q_exclude]}'" : '' %> size="16" type="text"> <a title="You can do this in simple search by adding a - (minus sign) to the beginning of the word you don't want." rel="twipsy" href="#">tip</a>
	</div>

	<div class="row">
	<div class="span14">
	    <h6>Additional Options</h6>
	<div class="span7 nomar">
		<div class="control-group">
		<label class="control-label">organization type</label>
		<select name="f[organization_type__facet][]" multiple="multiple">
		  <% selected_items = params[:f].nil? ? nil : params[:f][:organization_type__facet] %>
		  <% organization_type_options(:selected => selected_items).each do | key, value | %>
		    <%= '<option value="'.html_safe + key + '"'.html_safe + (value ? ' selected="selected"'.html_safe : ''.html_safe) + '>'.html_safe + key + '</option>'.html_safe %>
		  <% end %>
		</select>
	    </div>
		<div class="control-group">
		<label class="control-label">subject</label>
		<select name="f[subject__facet][]" multiple="multiple">
		  <% selected_items = params[:f].nil? ? nil : params[:f][:subject__facet] %>
		  <% subject_options(:selected => selected_items).each do | key, value | %>
		    <%= '<option value="'.html_safe + key + '"'.html_safe + (value ? ' selected="selected"'.html_safe : ''.html_safe) + '>'.html_safe + key + '</option>'.html_safe %>
		  <% end %>
		</select>
	    </div>
		<div class="control-group">
		<label class="control-label">geographic focus</label>
		  <select name="f[geographic_focus__facet][]" multiple="multiple">
		    <% selected_items = params[:f].nil? ? nil : params[:f][:geographic_focus__facet] %>
		    <% geographic_focus_options(:selected => selected_items).each do | key, value | %>
		      <%= '<option value="'.html_safe + key + '"'.html_safe + (value ? ' selected="selected"'.html_safe : ''.html_safe) + '>'.html_safe + key + '</option>'.html_safe %>
		    <% end %>
		  </select>
	    </div>
		<div class="control-group">
		<label class="control-label">organization based in</label>
		  <select name="f[organization_based_in__facet][]" multiple="multiple">
		    <% selected_items = params[:f].nil? ? nil : params[:f][:organization_based_in__facet] %>
		    <% organization_based_in_options(:selected => selected_items).each do | key, value | %>
		      <%= '<option value="'.html_safe + key + '"'.html_safe + (value ? ' selected="selected"'.html_safe : ''.html_safe) + '>'.html_safe + key + '</option>'.html_safe %>
		    <% end %>
		</select>
	    </div>
		<div class="control-group">
		<label class="control-label">file type</label>
		<select class="control-group" name="f[mimetype][]" multiple="multiple">
		  <%# selected_items = params[:f].nil? ? nil : params[:f][:mimetype] %>
		  <%# file_type_options(:selected => selected_items).each do | key, value | %>
		    <%#= '<option value="'.html_safe + key + '"'.html_safe + (value ? ' selected="selected"'.html_safe : ''.html_safe) + '>'.html_safe + key + '</option>'.html_safe %>
		  <%# end %>
		</select>
	    </div>
		<div id="search_date_range" class="control-group">
		<label class="control-label">date of capture</label>
		<input id="crawl_start_date" class="span2 datepicker" type="text" name="crawl_start_date" value="" /> - <input id="crawl_end_date" class="span2 datepicker" type="text" name="crawl_end_date" value="" />
	    </div>
	</div>
	<div class="span7 nomar">
		<div class="control-group">
		<label class="control-label">language</label>
		<select name="f[language__facet][]" multiple="multiple">
		  <% selected_items = params[:f].nil? ? nil : params[:f][:language__facet] %>
		  <% language_options(:selected => selected_items).each do | key, value | %>
		    <%= '<option value="'.html_safe + key + '"'.html_safe + (value ? ' selected="selected"'.html_safe : ''.html_safe) + '>'.html_safe + key + '</option>'.html_safe %>
		  <% end %>
		</select>
		<!--Non-displayed facets below here-->
	    </div>
		<div class="control-group">
		<label class="control-label">title</label>
		<select name="f[title][]" multiple="multiple">
		  <% selected_items = params[:f].nil? ? nil : params[:f][:title] %>
		  <% title_options(:selected => selected_items).each do | key, value | %>
		    <%= '<option value="'.html_safe + key + '"'.html_safe + (value ? ' selected="selected"'.html_safe : ''.html_safe) + '>'.html_safe + key + '</option>'.html_safe %>
		  <% end %>
		</select>
	    </div>
		<div class="control-group">
		<label class="control-label">creator name</label>
		<select name="f[creator_name__facet][]" multiple="multiple">
		  <% selected_items = params[:f].nil? ? nil : params[:f][:creator_name__facet] %>
		  <% creator_name_options(:selected => selected_items).each do | key, value | %>
		    <%= '<option value="'.html_safe + key + '"'.html_safe + (value ? ' selected="selected"'.html_safe : ''.html_safe) + '>'.html_safe + key + '</option>'.html_safe %>
		  <% end %>
		</select>
	    </div>
		<div class="control-group">
		<label class="control-label">original url</label>
		<select name="f[original_urls][]" multiple="multiple">
		  <% selected_items = params[:f].nil? ? nil : params[:f][:original_urls] %>
		  <% original_urls_options(:selected => selected_items).each do | key, value | %>
		    <%= '<option value="'.html_safe + key + '"'.html_safe + (value ? ' selected="selected"'.html_safe : ''.html_safe) + '>'.html_safe + key + '</option>'.html_safe %>
		  <% end %>
		</select>
	    </div>
		<div class="control-group">
		<label class="control-label">domain</label>
		<select class="control-group" name="f[domain][]" multiple="multiple">
		  <% selected_items = params[:f].nil? ? nil : params[:f][:domain] %>
		  <% domain_options(:selected => selected_items).each do | key, value | %>
		    <%= '<option value="'.html_safe + key + '"'.html_safe + (value ? ' selected="selected"'.html_safe : ''.html_safe) + '>'.html_safe + key + '</option>'.html_safe %>
		  <% end %>
		</select>
	    </div>
	</div>
	</div>
	</div>
	<div class="row">
	<div class="span14">
	 <h6>display options</h6>
	 <div class="span7 nomar">
		<div class="control-group">
		<label class="control-label">results per page</label>
		<select class="control-group" name="per_page">
			<option>10</option>
			<option>20</option>
			<option>30</option>
		</select>
	    </div>
	 </div>
	 <div class="span7 nomar">
		<div class="control-group">
		<label class="control-label">sort</label>
		<select class="control-group" name="sort">
		  <option value="score desc">Relevance</option>
		</select>
	    </div>
	 </div>
	</div>
	</div>
	<div class="row">
	<div class="span14">
	 <h6>dev options (temporary)</h6>
	 <div class="span7 nomar">
		<div class="control-group">
		<label class="control-label">host</label>
		<select class="control-group">
		  <option></option>
		</select>
	    </div>
	 </div>
	 <div class="span7 nomar">
		<div class="control-group">
		<label class="control-label">core</label>
		<select class="control-group">
		  <option></option>
		</select>
	    </div>
	 </div>
	</div>
	</div>

	<p>
	<input type="hidden" name="sort" value="score desc" />

	<input type="hidden" name="search_mode" value="advanced" />

	<input id="advsubmit" type="submit" value="submit" class="btn success" />
	<input id="advreset" type="reset" value="reset all" class="btn" />
	</p>
      </div> <!-- //advanced_search -->
    </div>

  </div>


</div>
