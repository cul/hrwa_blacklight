<div class="container">

  <!-- Main hero unit for a primary marketing message or call to action -->
  <div id="hero-search" class="hero-unit hero-border ">
	<% if ! params[:search].nil? %>
	  <%= link_to 'Start a new search', search_path, :class=> 'floatright', :id => 'start_new_search_link' %>
	<% end %>
    <h3>Human Rights Web Archive</h3>

    <a href="#" id="advo_link" title="Advanced Options Toggle" rel="twipsy" class="advtoggle btn mono floatright lime">Adv+</a>

	<script type="text/javascript">
	  HRWA.q = decodeURIComponent("<%= params[:q].blank? ? '' : CGI.escape(params[:q]).gsub('+','%20') %>");
	  HRWA.q_and = decodeURIComponent("<%= params[:q_and].blank? ? '' : CGI.escape(params[:q_and]).gsub('+','%20') %>");
	  HRWA.q_phrase = decodeURIComponent("<%= params[:q_phrase].blank? ? '' : CGI.escape(params[:q_phrase]).gsub('+','%20') %>");
	  HRWA.q_or = decodeURIComponent("<%= params[:q_or].blank? ? '' : CGI.escape(params[:q_or]).gsub('+','%20') %>");
	  HRWA.q_exclude = decodeURIComponent("<%= params[:q_exclude].blank? ? '' : CGI.escape(params[:q_exclude]).gsub('+','%20') %>");
	  HRWA.currently_visible_form = 'simple';
	</script>

    <%= form_tag search_path, :method => :get, :id => 'searchform', :class => 'form-inline',
    :'data-searchmode-onload' => (params[:search_mode] == 'advanced' ? 'advanced' : 'simple'),
	:'data-searchtype-onload' => ( ! @configurator.nil? && @configurator.name == 'archive' ? 'archive' : 'find_site') do %>
      <input type="hidden" name="search" value="true" />

      <div id="inside_of_form">
		<div id="simple_options">
		  <div id="heross">

			<div class="input-append pull-left">
			  <div id="q_container" class="pull-left"><%= text_field_tag :q, params[:q], :class => "span8 pull-left", :placeholder =>'Enter search terms...', :size => '16' %></div>

			  <%= search_as_hidden_fields(:omit_keys => [ #blacklight defaults
								      :q, :qt, :page,
								      #hrwa custom additions
								      :utf8, :search, :search_type, :q_and, :q_or, :q_exclude, :q_not, :search_mode
								     ]).html_safe %>
			  <span class="submit_button_container">
				<span id="s_type_selector_and_submit">
				  <label class="add-on pull-left"><input type="radio" name="search_type" class="pull-left" id="fsfsearch" value="find_site"<%= ( @configurator.nil? || @configurator.name  == 'find_site' ) ? ' checked="checked"'.html_safe : ''.html_safe; %>/> FSF</label>
				  <label class="add-on pull-left"><input type="radio" name="search_type" class="pull-left" id="asfsearch" value="archive"<%= ( ! @configurator.nil? && @configurator.name  == 'archive' ) ? ' checked="checked"'.html_safe : ''.html_safe; %>/> ASF</label>
				  <label class="add-on hidden pull-left">
					<a href="#" id="form_submit" class="submitss">Submit</a>
				  </label>
				</span>
			  </span>
			</div>

		  </div><!--/heross-->
		  <%= render 'constraints', :localized_params=>params %>
		</div><!--/simple_options-->
      </div> <!--/inside_of_form-->

    <% end %>

    <div id="outside_of_form" class="invisible">

      <div id="advanced_options_fsf" class="advanced_options">

	<%= render :partial=>'advanced_options_fsf' %>

      </div> <!-- //advanced_options_fsf -->

      <div id="advanced_options_asf" class="advanced_options">

	<%= render :partial=>'advanced_options_asf' %>

      </div> <!-- //advanced_options_asf -->

    </div>

  </div>


</div>
