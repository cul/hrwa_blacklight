<% item_count_id = document_counter + 1 + @response.params[:start].to_i %>

<% performing_a_search = (params[:controller] == 'catalog' && params[:action] == 'index') || (params[:controller] == 'catalog' && params[:action] == 'hrwa_home') %>
<% folder_view = (params[:controller] == 'folder' && params[:action] == 'index') %>
<%
  thumbnail = image_tag(get_image_uri(document, 640), {:'data-info' => document.get('item_title'), :alt => document.get('item_title')})

  doc_text_link_html = link_to_document document, :label=>document_show_link_field, :counter => (document_counter + 1 + @response.params[:start].to_i), :results_view => performing_a_search, :folder_view => folder_view
  doc_button_link_html = link_to_document document, :label=>'View Item <i class="icon-circle-arrow-right icon-white"></i>'.html_safe, :counter => (document_counter + 1 + @response.params[:start].to_i), :class => 'item-link btn btn-mini btn-inverse', :rel => 'tooltip', :'data-original-title' => document.get('item_title'), :results_view => performing_a_search, :folder_view => folder_view
  thumbnail_link_html = link_to_document document, :label=>thumbnail.html_safe, :counter => (document_counter + 1 + @response.params[:start].to_i), :class => 'thumbnail thumb_link', :results_view => performing_a_search, :folder_view => folder_view
%>

<% # container for a single doc -%>


  <li class="span3">
    <% # container for a single doc -%>
    <article id="a_<%= item_count_id %>" class="post thumbnail document <%= render_document_class document %>">
      <%= thumbnail_link_html %>
      <div class="caption">
        <% # header bar for doc items in index view -%>
        <div class="documentHeader">
            <% # bookmark/folder functions for items/docs -%>
            <%= render_index_doc_actions document %>
            <% # main title container for doc partial view -%>
            <h5 class="index_title"><%= (item_count_id.to_s + '. ') if (params[:controller] == 'catalog' && params[:action] == 'index') %><%= doc_text_link_html %></h5>
        </div>

        <p>
          <%= doc_button_link_html %>
        </p>
      </div> <!-- /.caption -->

      <%# OpenURL Coins Info (for Zotero compatibility) -%>
      <%= render :partial => 'catalog/openurl_coins_data_for_a_document', :locals => {:document => document} %>
    </article>
  </li>


<!-- REQUEST_TEST_STRING: HRWA::CATALOG::DOCUMENT::RENDER_SUCCESS -->
