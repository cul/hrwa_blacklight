<%- # local params:
    # label
    # value
    # options =>
    #   :remove => url for a remove constraint link
    #   :classes => array of classes to add to container span
    options ||= {}
    options[:escape_label] = true unless options.has_key?(:escape_label)
    options[:escape_value] = true unless options.has_key?(:escape_value)

    processed_label = options[:escape_label] ? h(label) : label
    processed_value = options[:escape_value] ? h(value) : value
-%>

<span class="appliedFilter constraint <%= options[:classes].join(" ") if options[:classes] %>">
      <%
      if ! label.blank? && ! options[:remove].blank?
	removal_link_body = "[x] #{processed_label}: #{processed_value}"
	%>
        <%= link_to(removal_link_body,
		    options[:remove],
		    :rel=>'tooltip', :title=>'Remove this filter', :class=>'delfq btn small ' + (options[:classes].join(" ") if options[:classes])) %>
	<%
      end
      %>
</span>
